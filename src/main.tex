\documentclass[titlepage, a4paper]{article}
%\usepackage{euler}
\usepackage{graphicx, amssymb, amsmath, textcomp, booktabs}
\usepackage[libertine,vvarbb]{newtxmath}
\usepackage[scr=rsfso]{mathalfa}
% \usepackage[lining,semibold,type1]{libertine} % a bit lighter than Times--no osf in math
\usepackage[T1]{fontenc} % best for Western European languages
\usepackage{minted}
\usepackage{listings, color, setspace, titlesec, fancyhdr, mdframed, multicol}
\usepackage{ucharclasses}
\usepackage{xunicode, xltxtra}
\usepackage[inner=1.35cm, outer=0.9cm, top=1.7cm, bottom=0.0cm]{geometry}
\usepackage{pdfpages}
\usepackage{tocloft}
\usepackage{nameref}
\usepackage{verbatim}
\usepackage{relsize}
\usepackage{fontspec}
\usepackage[colorlinks, linkcolor = black]{hyperref}
\usepackage[table]{xcolor}
\usepackage{tabularx}
% configure fonts
% if not using CJK
% \newfontfamily\substitutefont{SimSun}[Scale=0.8,BoldFont=SimHei]
% \setTransitionsForChinese{\begingroup\substitutefont}{\endgroup}
\usepackage{xeCJK}
\setCJKmainfont{STFangsong}[Scale=0.8]
\setCJKmonofont{SimHei}[Scale=0.8]
\setCJKsansfont{KaiTi}[Scale=0.8]

\setmainfont{Linux Libertine O}[Scale=0.925]
\setmonofont{Consolas}[Scale=0.775]
%\setsansfont{Gill Sans Medium}

\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip = 0pt plus 1pt

\setlength{\parindent}{0em}\setlength{\parskip}{1pt}
\setlength\itemsep{1pt}

\makeatletter
\renewcommand{\paragraph}{%
  \@startsection{paragraph}{4}%
  {\z@}{1pt \@plus 1pt \@minus 1pt}{-1em}%
  {\normalfont\normalsize\bfseries}%
}
\makeatother


%configure the top corners
\pagestyle{fancy}
\setlength{\headsep}{0.1cm}

\chead{星尘幻想}
\rhead{Page \thepage}
\lhead{上海交通大学 Shanghai Jiao Tong University}
 
%configure space between the two columns
\setlength{\columnsep}{13pt}

%configure minted to display codes
%\definecolor{Gray}{rgb}{0.9,0.9,0.9}

%remove leading numbers in table of contents
%\setcounter{secnumdepth}{0}	

%configure section style of table of content
\renewcommand\cftsecfont{\Large}

%configure section style
\titleformat{\section}
{\huge}			% The style of the section title
{\thesection.}				% a prefix
{4pt}						% How much space exists between the prefix and the title
{}					% How the section is represented
% \titleformat{\section}{\huge}{}{0pt}{}
\titlespacing{\section}{0pt}{0pt}{0pt}
\titlespacing{\subsection}{0pt}{0pt}{0pt}
\titlespacing{\subsubsection}{0pt}{0pt}{0pt}

%enable section to start new page automatically
%\let\stdsection\section
%\renewcommand\section{\penalty-100\vfilneg\stdsection}

%\renewcommand\theFancyVerbLine{\arabic{FancyVerbLine}}
\renewcommand{\theFancyVerbLine}{\sffamily \textcolor[rgb]{0.5,0.5,0.5}{\scriptsize {\arabic{FancyVerbLine}}}}

\setminted[cpp]{
	style=xcode,
	mathescape,
	linenos,
	autogobble,
	baselinestretch=0.8,
	tabsize=3,
	fontsize=\normalsize,
	%bgcolor=Gray,
	frame=single,
	framesep=1mm,
	framerule=0.3pt,
	numbersep=1mm,
	breaklines=true,
	breaksymbolsepleft=2pt,
	%breaksymbolleft=\raisebox{0.8ex}{ \small\reflectbox{\carriagereturn}}, %not moe!
	%breaksymbolright=\small\carriagereturn,
	breakbytoken=false,
	showtabs=true,
	tab={\relscale{0.6} $\big\vert \ \ \ $ \relscale{1}},
}
\setminted[java]{
	style=xcode,
	mathescape,
	linenos,
	autogobble,
	baselinestretch=0.8,
	tabsize=3,
	fontsize=\normalsize,
	%bgcolor=Gray,
	frame=single,
	framesep=1mm,
	framerule=0.3pt,
	numbersep=1mm,
	breaklines=true,
	breaksymbolsepleft=2pt,
	%breaksymbolleft=\raisebox{0.8ex}{ \small\reflectbox{\carriagereturn}}, %not moe!
	%breaksymbolright=\small\carriagereturn,
	breakbytoken=false,
	showtabs=true,
	tab={\relscale{0.6} $\big\vert \ \ \ $ \relscale{1}},
}
\setminted[python]{
	style=xcode,
	mathescape,
	linenos,
	autogobble,
	baselinestretch=0.8,
	tabsize=3,
	fontsize=\normalsize,
	%bgcolor=Gray,
	frame=single,
	framesep=1mm,
	framerule=0.3pt,
	numbersep=1mm,
	breaklines=true,
	breaksymbolsepleft=2pt,
	%breaksymbolleft=\raisebox{0.8ex}{ \small\reflectbox{\carriagereturn}}, %not moe!
	%breaksymbolright=\small\carriagereturn,
	breakbytoken=false,
	showtabs=true,
	tab={\relscale{0.6} $\big\vert \ \ \ $ \relscale{1}},
}

\setminted[vim]{
	style=xcode,
	mathescape,
	linenos,
	autogobble,
	baselinestretch=0.8,
	tabsize=2,
	fontsize=\normalsize,
	%bgcolor=Gray,
	frame=single,
	framesep=1mm,
	framerule=0.3pt,
	numbersep=1mm,
	breaksymbolsepleft=2pt,
	%breaksymbolleft=\raisebox{0.8ex}{ \small\reflectbox{\carriagereturn}}, %not moe!
	%breaksymbolright=\small\carriagereturn,
	breakbytoken=false,
}

\setminted[sh]{
	style=xcode,
	mathescape,
	linenos,
	autogobble,
	baselinestretch=0.8,
	tabsize=2,
	fontsize=\normalsize,
	%bgcolor=Gray,
	frame=single,
	framesep=1mm,
	framerule=0.3pt,
	numbersep=1mm,
	breaklines=true,
	breaksymbolsepleft=2pt,
	%breaksymbolleft=\raisebox{0.8ex}{ \small\reflectbox{\carriagereturn}}, %not moe!
	%breaksymbolright=\small\carriagereturn,
	breakbytoken=false,
}


%THE SCL BEGINS
\begin{document}
	\begin{titlepage}
		% \input{cover/cover.tex}
	\end{titlepage}
	\begin{multicols}{2}
		\setcounter{tocdepth}{3}
		\begingroup
		\let\cleardoublepage\relax
		\let\clearpage\relax
		\begin{small}
		\begin{spacing}{0.75}
		\tableofcontents
		\end{spacing}
		\end{small}
		\newpage
		\begin{spacing}{0.6}
			
			\section{Geometry}
				\subsection{一些公式}
					\input{src/Geometry/formula.tex}
				\subsection{二维计算几何基础}
					\inputminted{cpp}{src/Geometry/geo.cpp}
				\subsection{三角形}
					\inputminted{cpp}{src/Geometry/triangle.cpp}
				\subsection{凸包}
					\inputminted{cpp}{src/Geometry/凸包.cpp}
				\subsection{半平面交}
					\inputminted{cpp}{src/Geometry/半平面交.cpp}
				\subsection{自适应辛普森}
					\inputminted{cpp}{src/Geometry/simpson.cpp}
			\newpage
			\section{Graph}
				\subsection{图论基本知识}
					\input{src/Graph/图论知识.tex}
				\subsection{2 SAT}
					\inputminted{cpp}{src/Graph/2-SAT.cpp}
				\subsection{极大团}
					\inputminted{cpp}{src/Graph/极大团.cpp}
				\subsection{k短路}
					\inputminted{cpp}{src/Graph/k短路.cpp}
				\subsection{KM}
					\inputminted{cpp}{src/Graph/KM.cpp}
				\subsection{tarjan}
					\inputminted{cpp}{src/Graph/tarjan.cpp}
				\subsection{最小斯坦纳树}
					\inputminted{cpp}{src/Graph/最小斯坦纳树.cpp}
			\newpage
			\section{Data Structure}
				\subsection{LCT 动态树}
					\inputminted{cpp}{src/DataStructure/LCT.cpp}
				\subsection{KD Tree}
					\inputminted{cpp}{src/DataStructure/KDT1.cpp}
					\inputminted{cpp}{src/DataStructure/KDT2.cpp}
				\subsection{李超线段树}
					\inputminted{cpp}{src/DataStructure/li-chao-tree.cpp}
				\subsection{吉司机线段树}
					\inputminted{cpp}{src/DataStructure/seg-tree.cpp}
				\subsection{FHQ Treep}
					\inputminted{cpp}{src/DataStructure/fhq-treap.cpp}
				\subsection{哈希表}
					\inputminted{cpp}{src/DataStructure/hashmap.cpp}

			\section{String}
				\subsection{最小表示法}
					\inputminted{cpp}{src/String/最小表示法.cpp}
				\subsection{AC 自动机}
					\inputminted{cpp}{src/String/ACAM.cpp}
				\subsection{回文树}
					\inputminted{cpp}{src/String/PAM.cpp}
				\subsection{Manacher}
					\inputminted{cpp}{src/String/Manacher.cpp}
				\subsection{字符串哈希}
					\inputminted{cpp}{src/String/MultipleHash.cpp}
				\subsection{SA}
					\inputminted{cpp}{src/String/SA.cpp}
				\subsection{SAM}
					\inputminted{cpp}{src/String/SAM.cpp}
				\subsection{KMP and EXKMP}
					\inputminted{cpp}{src/String/KMPexKMP.cpp}
				\subsection{Lydon}
					\inputminted{cpp}{src/String/LydonWordDecomposition.cpp}
				\subsection{SASAM后缀树}
					\inputminted{cpp}{src/String/SASAM后缀树.cpp}
				\subsection{后缀平衡树}
					\inputminted{cpp}{src/String/后缀平衡树.cpp}
			\section{Polynomial}
				\subsection{FFT}
					\inputminted{cpp}{src/Math Polynomial/FFT.cpp}
				\subsection{FMT \& FWT}
					\inputminted{cpp}{src/Math Polynomial/FWT.cpp}
				\subsection{任意模数NTT}
					\inputminted{cpp}{src/Math Polynomial/任意模数多项式乘法.cpp}
				\subsection{多项式全家桶}
					\inputminted{cpp}{src/Math Polynomial/poly.cpp}
		\begin{comment}
				\newpage
			\subsection*{Java Example}
				\inputminted{java}{src/Miscellany/Main2.java}
			\subsection*{Python Example}
				\inputminted{python}{src/Miscellany/test.py}
			\subsection*{Blossom}
				\inputminted{python}{src/TreeandGraph/Blossom.cpp}
			\subsection*{Chu-liu}
				\inputminted{cpp}{src/TreeandGraph/最小树形图.cpp}
			\subsection*{天动万象}
				\inputminted{cpp}{src/yzh/ByteCampA3.cpp}
		\end{comment}
			%\end{comment}
		\end{spacing}
		\endgroup
	\end{multicols}
	\begin{center}
		\LARGE{Good Luck \&\& Have Fun!}
	\end{center}
	
\end{document}
%THE SCL ENDS
